<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<meta charset="UTF-8" name="viewport"
		content="width=device-width, initial-scale=1.0" />
	<title>Gerenciador de Tarefas</title>

	<h:outputStylesheet library="css" name="task-list-style.css" />

	<f:metadata>
		<f:viewAction action="#{taskBean.listarTasks}" />
	</f:metadata>

</h:head>

<h:body>

	<div class="header">
		<p:tag styleClass="mr-2" value="Gerenciador de Tarefas"></p:tag>
	</div>

	<div class="body">
		<p:panel class="panel" header="Listagem de Tarefas">
			<h:form>
				<div class="panel-body">
					<div class="panel-label-column">
						<h:outputLabel value="Número: " />
						<h:outputLabel value="Título/Descrição: " />
						<h:outputLabel value="Responsável: " />
					</div>
					<div class="panel-input-column">
						<p:inputText id="input-number-filter" label="Firstname" />
						<p:inputText id="input-title-filter" label="Firstname" />
						<div class="panel-input-column-row">
							<div>
								<p:selectOneMenu id="DEFINIR_ID_1">
									<p:ajax update="@this" process="@this" />
									<f:selectItem itemLabel="Select" itemValue="#{null}"
										noSelectionOption="true" />
									<f:selectItem itemLabel="Option1" itemValue="Option1" />
									<f:selectItem itemLabel="Option2" itemValue="Option2" />
									<f:selectItem itemLabel="Option3" itemValue="Option3" />
								</p:selectOneMenu>
							</div>
							<div>
								<h:outputLabel value="Situação: " />
								<p:selectOneMenu id="DEFINIR_ID_2">
									<p:ajax update="@this" process="@this" />
									<f:selectItem itemLabel="Select" itemValue="#{null}"
										noSelectionOption="true" />
									<f:selectItem itemLabel="Option1" itemValue="Option1" />
									<f:selectItem itemLabel="Option2" itemValue="Option2" />
									<f:selectItem itemLabel="Option3" itemValue="Option3" />
								</p:selectOneMenu>
							</div>
							<div>
								<p:commandButton type="button" value="Buscar Tarefas"
									icon="ui-icon-check" />
							</div>
						</div>
					</div>
				</div>
				<div class="table">
					<p:dataTable id="tasksDataTable" value="#{taskBean.tasks}"
						var="task" paginator="true" rows="3" paginatorPosition="bottom">
						<p:column headerText="Número">
							<h:outputText value="#{task.id}" />
						</p:column>
						<p:column headerText="Título">
							<h:outputText value="#{task.title}" />
						</p:column>
						<p:column headerText="Responsável">
							<h:outputText value="#{task.taskResponsibleEnum}" />
						</p:column>
						<p:column headerText="Situação">
							<h:outputText value="#{task.taskSituationEnum}" />
						</p:column>
						<p:column exportable="false">
							<p:commandButton icon="pi pi-pencil" update=""
								oncomplete="PF('manageProductDialog').show()"
								styleClass="edit-button rounded-button ui-button-success"
								process="@this">
								<f:setPropertyActionListener value="#{product}"
									target="#{crudView.selectedProduct}" />
								<p:resetInput target=":dialogs:manage-product-content" />
							</p:commandButton>
							<p:commandButton class="ui-button-warning rounded-button"
								icon="pi pi-trash" process="@this"
								oncomplete="PF('deleteProductDialog').show()">
								<f:setPropertyActionListener value="#{product}"
									target="#{crudView.selectedProduct}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
					<p:dialog id="registerTaskModal" header="Cadastrar Tarefa"
						widgetVar="taskDialogWidgetVar" modal="true" resizable="false"
						closeOnEscape="true" draggable="false">
						<h:panelGrid columns="2" rendered="#{taskBean.task ne null}">
							<h:outputLabel for="title" value="Título: " />
							<p:inputText id="title" value="#{taskBean.task.title}" size="80"
								label="Firstname" />

							<h:outputLabel for="description" value="Descrição: " />
							<p:inputTextarea value="#{taskBean.task.description}"
								class="panel-input-description" id="description" rows="3"
								autoResize="true" />
							<h:outputText id="display" class="block" />
						</h:panelGrid>
						<h:panelGrid columns="4" rendered="#{taskBean.task ne null}">
							<h:outputLabel for="taskResponsibleEnum" value="Responsável: " />
							<p:selectOneMenu id="taskResponsibleEnum"
								value="#{taskBean.task.taskResponsibleEnum}">
								<f:selectItem itemLabel="Selecione" />
								<f:selectItems value="#{taskBean.taskResponsibleEnums}"
									var="taskResponsibleEnum"
									itemLabel="#{taskResponsibleEnum.descricao}"
									itemValue="#{taskResponsibleEnum}" />
							</p:selectOneMenu>

							<h:outputLabel for="taskPriorityLevel" value="Prioridade: " />
							<p:selectOneMenu id="taskPriorityLevel"
								value="#{taskBean.task.taskPriorityLevelEnum}">
								<f:selectItem itemLabel="Selecione" />
								<f:selectItems value="#{taskBean.taskPriorityLevelEnums}"
									var="taskPriorityLevelEnum"
									itemLabel="#{taskPriorityLevelEnum.descricao}"
									itemValue="#{taskPriorityLevelEnum}" />
							</p:selectOneMenu>
						</h:panelGrid>
						<h:panelGrid columns="2" rendered="#{taskBean.task ne null}">
							<h:outputLabel for="deadLine" value="Deadline: " />
							<p:datePicker class="field col-12 md:col-4" id="deadLine" showTime="true"
								value="#{taskBean.task.deadline}" />
						</h:panelGrid>

						<div class="btn-cadastrar">
							<p:commandButton class="create-task-btn" type="submit"
								value="Cadastrar" icon="ui-icon-check"
								actionListener="#{taskBean.createNewTask}"
								update="tasksDataTable registerTaskModal"
								action="task-list?faces-redirect=true"
								oncomplete="PF('taskDialogWidgetVar').hide()" />
						</div>
					</p:dialog>
				</div>
				<div>
					<p:commandButton class="create-task-btn" type="submit"
						value="Adicionar Tarefa" icon="ui-icon-check"
						actionListener="#{taskBean.prepareNewTask}"
						oncomplete="PF('taskDialogWidgetVar').show()"
						update="registerTaskModal" />
				</div>
			</h:form>
		</p:panel>
	</div>

</h:body>

</html>